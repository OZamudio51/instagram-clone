"use strict";(self.webpackChunkinstagram_react12=self.webpackChunkinstagram_react12||[]).push([[796],{4796:function(e,t,n){n.r(t);var o=n(885),s=n(2791),r=n(9899),i=n(3044),a=n(4325),c=n(1523),l=n(8302),u=n(6513),p=n(2168),f=n(1354),d=n(554),m=n(7695),h=n.n(m),y=n(8491),v=n(4428),x=n(184),b=function(){var e=(0,r.yj)(),t=(0,s.useState)(!1),n=(0,o.Z)(t,2),i=n[0],c=n[1],l=i?a.M:a.lM,u=i?e.liked:e.like,p=i?function(){return c(!1)}:function(){return c(!0)};return(0,x.jsx)(l,{className:u,onClick:p})},j=function(){var e=(0,r.yj)(),t=(0,s.useState)(!1),n=(0,o.Z)(t,2),i=n[0],c=n[1],l=i?a.HF:a.N,u=i?function(){return c(!1)}:function(){return c(!0)};return(0,x.jsx)(l,{className:e.saveIcon,onClick:u})},g=function(){var e=(0,r.yj)(),t=(0,s.useState)(""),n=(0,o.Z)(t,2),i=n[0],a=n[1];return(0,x.jsxs)("div",{className:e.commentContainer,children:[(0,x.jsx)(d.Z,{fullWidth:!0,value:i,placeholder:"Add a comment...",multiline:!0,maxRows:2,minRows:1,onChange:function(e){return a(e.target.value)},className:e.textField,InputProps:{classes:{root:e.root,underline:e.underline}}}),(0,x.jsx)(u.Z,{color:"primary",className:e.commentButton,disabled:!i.trim(),children:"Post"})]})};t.default=function(e){var t=e.post,n=e.index,d=(0,r.yj)(),m=(0,s.useState)(!1),w=(0,o.Z)(m,2),N=w[0],S=w[1],k=(0,s.useState)(),O=(0,o.Z)(k,2),E=O[0],C=O[1],L=t.media,T=t.id,Z=t.likes,H=t.user,M=t.caption,P=t.comments,_=1===n;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("article",{className:d.article,style:{marginBottom:_&&30},children:[(0,x.jsxs)("div",{className:d.postHeader,children:[(0,x.jsx)(i.Z,{user:H}),(0,x.jsx)(a.nX,{className:d.moreIcon,onClick:function(){return C(!0)}})]}),(0,x.jsx)("div",{children:(0,x.jsx)("img",{src:L,alt:"Post media",className:d.image})}),(0,x.jsxs)("div",{className:d.postButtonsWrapper,children:[(0,x.jsxs)("div",{className:d.postButtons,children:[(0,x.jsx)(b,{}),(0,x.jsx)(c.rU,{to:"/p/".concat(T),children:(0,x.jsx)(a.qt,{})}),(0,x.jsx)(a.aA,{}),(0,x.jsx)(j,{})]}),(0,x.jsx)(l.Z,{className:d.likes,variant:"subtitle2",children:(0,x.jsx)("span",{children:1===Z?"1 like":"".concat(Z," likes")})}),(0,x.jsxs)("div",{className:N?d.expanded:d.collapsed,children:[(0,x.jsx)(c.rU,{to:"/".concat(H.username),children:(0,x.jsx)(l.Z,{variant:"subtitle2",component:"span",className:d.username,children:H.username})}),N?(0,x.jsx)(l.Z,{variant:"body2",component:"span",dangerouslySetInnerHTML:{__html:M}}):(0,x.jsxs)("div",{className:d.captionWrapper,children:[(0,x.jsx)(h(),{unsafeHTML:M,className:d.caption,maxLine:"0",ellipsis:"...",basedOn:"letters"}),(0,x.jsx)(u.Z,{className:d.moreButton,onClick:function(){return S(!0)},children:"more"})]})]}),(0,x.jsx)(c.rU,{to:"/p/".concat(T),children:(0,x.jsxs)(l.Z,{className:d.commentsLink,variant:"body2",component:"div",children:["View all ",P.length," comments"]})}),P.map((function(e){return(0,x.jsx)("div",{children:(0,x.jsxs)(c.rU,{to:"/".concat(e.user.username),children:[(0,x.jsx)(l.Z,{variant:"subtitle2",component:"span",className:d.commentUsername,children:e.user.username})," ",(0,x.jsx)(l.Z,{variant:"body2",component:"span",children:e.content})]})},e.id)})),(0,x.jsx)(l.Z,{color:"textSecondary",className:d.datePosted,children:"5 DAYS AGO"})]}),(0,x.jsxs)(p.Z,{xsDown:!0,children:[(0,x.jsx)(f.Z,{}),(0,x.jsx)(g,{})]})]}),_&&(0,x.jsx)(y.Z,{}),E&&(0,x.jsx)(v.Z,{onClose:function(){return C(!1)}})]})}},7685:function(e){e.exports={canvasStyle:{position:"absolute",bottom:0,left:0,height:0,overflow:"hidden","padding-top":0,"padding-bottom":0,border:"none"},mirrorProps:["box-sizing","width","font-size","font-weight","font-family","font-style","letter-spacing","text-indent","white-space","word-break","overflow-wrap","padding-left","padding-right"]}},3984:function(e){function t(e){return t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}e.exports={omit:function(e,n){if(!e||"object"!==t(e))return e;var o={};return Object.keys(e).forEach((function(t){n.indexOf(t)>-1||(o[t]=e[t])})),o}}},7695:function(e,t,n){function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s.apply(this,arguments)}function r(e,t){if(null==e)return{};var n,o,s=function(e,t){if(null==e)return{};var n,o,s={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t,n){return c="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(o){var s=Object.getOwnPropertyDescriptor(o,t);return s.get?s.get.call(n):s.value}},c(e,t,n||e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}var p=n(2791),f=n(7685),d=f.canvasStyle,m=f.mirrorProps,h=n(3984).omit;function y(e,t){if("letters"!==t&&"words"!==t)throw new Error("Unsupported options basedOn: ".concat(t));if(e.nodeType===Node.TEXT_NODE){var n,o=document.createDocumentFragment();switch(t){case"words":n=e.textContent.split(/\b|(?=\W)/);break;case"letters":n=Array.from(e.textContent)}n.forEach((function(e){o.appendChild(function(e){var t=document.createElement("span");return t.className="LinesEllipsis-unit",t.textContent=e,t}(e))})),e.parentNode.replaceChild(o,e)}else if(e.nodeType===Node.ELEMENT_NODE)for(var s=[].slice.call(e.childNodes),r=s.length,i=0;i<r;i++)y(s[i],t)}function v(e){e.parentNode.replaceChild(document.createTextNode(e.textContent),e)}function x(e,t){if(t.contains(e)&&e!==t){for(;e.nextElementSibling;)e.parentNode.removeChild(e.nextElementSibling);x(e.parentNode,t)}}function b(e){for(var t=e;t=t.parentNode;)if(/p|div|main|section|h\d|ul|ol|li/.test(t.tagName.toLowerCase()))return t}function j(e){return!(!e.offsetHeight||!e.offsetWidth&&!/\S/.test(e.textContent))}var g={component:"div",unsafeHTML:"",maxLine:1,ellipsis:"\u2026",ellipsisHTML:void 0,className:"",basedOn:void 0,onReflow:function(){},winWidth:void 0},w=Object.keys(g),N=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=a(this,l(t).call(this,e))).state={html:e.unsafeHTML,clamped:!1},n.canvas=null,n.maxLine=0,n.nlUnits=[],n}var n,o,f;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){this.initCanvas(),this.reflow(this.props)}},{key:"componentDidUpdate",value:function(e){e.winWidth!==this.props.winWidth&&this.copyStyleToCanvas(),this.props!==e&&this.reflow(this.props)}},{key:"componentWillUnmount",value:function(){this.canvas.parentNode.removeChild(this.canvas)}},{key:"setState",value:function(e,n){return"undefined"!==typeof e.clamped&&(this.clamped=e.clamped),c(l(t.prototype),"setState",this).call(this,e,n)}},{key:"initCanvas",value:function(){if(!this.canvas){var e=this.canvas=document.createElement("div");e.className="LinesEllipsis-canvas ".concat(this.props.className),e.setAttribute("aria-hidden","true"),this.copyStyleToCanvas(),Object.keys(d).forEach((function(t){e.style[t]=d[t]})),document.body.appendChild(e)}}},{key:"copyStyleToCanvas",value:function(){var e=this,t=window.getComputedStyle(this.target);m.forEach((function(n){e.canvas.style[n]=t[n]}))}},{key:"reflow",value:function(e){this.maxLine=+e.maxLine||1,this.canvas.innerHTML=e.unsafeHTML;var t=e.basedOn||(/^[\x00-\x7F]+$/.test(e.unsafeHTML)?"words":"letters");y(this.canvas,t);var n={clamped:this.putEllipsis(this.calcIndexes()),html:this.canvas.innerHTML};this.setState(n,e.onReflow.bind(this,n))}},{key:"calcIndexes",value:function(){var e=[0],t=this.nlUnits=Array.from(this.canvas.querySelectorAll(".LinesEllipsis-unit")),n=t.length;if(!t.length)return e;var o=t.find(j);if(!o)return e;for(var s=1,r=o.offsetTop,i=1;i<n&&!(j(t[i])&&t[i].offsetTop-r>1&&(s++,e.push(i),r=t[i].offsetTop,s>this.maxLine));i++);return e}},{key:"putEllipsis",value:function(e){if(e.length<=this.maxLine)return!1;this.nlUnits=this.nlUnits.slice(0,e[this.maxLine]);var t=this.nlUnits.pop(),n=this.makeEllipsisSpan();do{x(t,this.canvas),b(t).appendChild(n),t=this.nlUnits.pop()}while(t&&(!j(t)||n.offsetHeight>t.offsetHeight||n.offsetTop>t.offsetTop));return t&&v(t),this.nlUnits.forEach(v),!0}},{key:"makeEllipsisSpan",value:function(){var e=this.props,t=e.ellipsisHTML,n=e.ellipsis,o=document.createElement("span");o.appendChild(document.createElement("wbr"));var s=document.createElement("span");return s.className="LinesEllipsis-ellipsis",t?s.innerHTML=t:s.textContent=n,o.appendChild(s),o}},{key:"isClamped",value:function(){return this.clamped}},{key:"render",value:function(){var e=this,t=this.state,n=t.html,o=t.clamped,i=this.props,a=i.component,c=i.className,l=i.unsafeHTML,u=r(i,["component","className","unsafeHTML"]);return p.createElement(a,s({className:"LinesEllipsis ".concat(o?"LinesEllipsis--clamped":""," ").concat(c),ref:function(t){return e.target=t}},h(u,w)),p.createElement("div",{dangerouslySetInnerHTML:{__html:o?n:l}}))}}])&&i(n.prototype,o),f&&i(n,f),t}(p.Component);N.defaultProps=g,e.exports=N}}]);
//# sourceMappingURL=796.3ca1999a.chunk.js.map